<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Kommentare & URLs in Karten</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #357abd;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Test: Kommentare & URLs in Karten</h1>
    
    <div class="test-section">
        <h2>N8N Workflow Test-Daten</h2>
        <p>Diese Daten simulieren, was N8N an das Kanban-Board senden würde:</p>
        
        <pre id="test-data">{
  "type": "cards",
  "column": "Recherche",
  "cards": [
    {
      "title": "Produktanalyse Q2",
      "content": "## Analyse der Verkaufszahlen\n\n- Umsatz: +15%\n- Neue Kunden: +8%\n- Wiederkehrende Kunden: +22%",
      "comment": "Sehr positive Entwicklung, besonders bei bestehenden Kunden",
      "url": "https://example.com/sales-report-q2"
    },
    {
      "title": "Website-Optimierung",
      "content": "## To-Do Liste\n\n1. Landing Page redesign\n2. Mobile responsiveness\n3. SEO-Verbesserungen",
      "comment": "Priorität: Hoch - Deadline 15. Juni",
      "url": "https://github.com/company/website-optimization"
    },
    {
      "title": "Kundenfeedback Auswertung",
      "content": "Sammlung der wichtigsten Kundenfeedbacks aus dem letzten Monat.",
      "comment": "5-Sterne-Bewertungen um 12% gestiegen",
      "url": "https://docs.google.com/spreadsheets/feedback-analysis"
    }
  ]
}</pre>
        
        <button class="test-button" onclick="simulateN8NData()">📤 N8N Daten simulieren</button>
        <button class="test-button" onclick="openKanbanBoard()">🎯 Kanban Board öffnen</button>
    </div>
    
    <div class="test-section">
        <h2>Erwartete Features</h2>
        <ul>
            <li>✅ <strong>Kommentare:</strong> Werden unterhalb des Karteninhalts angezeigt</li>
            <li>✅ <strong>URLs:</strong> Sind direkt klickbar (öffnen in neuem Tab)</li>
            <li>✅ <strong>Drag & Drop:</strong> URLs interferieren nicht mit Drag & Drop</li>
            <li>✅ <strong>Card Modal:</strong> Kommentare und URLs sind bearbeitbar</li>
            <li>✅ <strong>Full Card Modal:</strong> Kommentare und URLs werden angezeigt</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Testanweisungen</h2>
        <ol>
            <li>Klicken Sie auf "N8N Daten simulieren" um Testkarten zu erstellen</li>
            <li>Öffnen Sie das Kanban Board</li>
            <li>Prüfen Sie, ob die Kommentare (💬) unterhalb der Karten sichtbar sind</li>
            <li>Klicken Sie auf die URLs (🔗) - sie sollten in einem neuen Tab öffnen</li>
            <li>Testen Sie Drag & Drop - URLs sollten nicht interferieren</li>
            <li>Doppelklicken Sie auf eine Karte für das Full Modal</li>
            <li>Bearbeiten Sie eine Karte - Kommentar und URL Felder sollten verfügbar sein</li>
        </ol>
    </div>

    <script>
        function simulateN8NData() {
            const testData = {
                type: "cards",
                column: "Recherche",
                cards: [
                    {
                        title: "Produktanalyse Q2",
                        content: "## Analyse der Verkaufszahlen\n\n- Umsatz: +15%\n- Neue Kunden: +8%\n- Wiederkehrende Kunden: +22%",
                        comment: "Sehr positive Entwicklung, besonders bei bestehenden Kunden",
                        url: "https://example.com/sales-report-q2"
                    },
                    {
                        title: "Website-Optimierung", 
                        content: "## To-Do Liste\n\n1. Landing Page redesign\n2. Mobile responsiveness\n3. SEO-Verbesserungen",
                        comment: "Priorität: Hoch - Deadline 15. Juni",
                        url: "https://github.com/company/website-optimization"
                    },
                    {
                        title: "Kundenfeedback Auswertung",
                        content: "Sammlung der wichtigsten Kundenfeedbacks aus dem letzten Monat.",
                        comment: "5-Sterne-Bewertungen um 12% gestiegen", 
                        url: "https://docs.google.com/spreadsheets/feedback-analysis"
                    }
                ]
            };
            
            // Simuliere WebSocket-Nachricht
            if (window.opener && window.opener.addColumnWithCards) {
                window.opener.addColumnWithCards(testData.column, testData.cards);
                alert('✅ Testkarten wurden erfolgreich erstellt!\nÖffnen Sie das Kanban Board um sie zu sehen.');
            } else {
                // Speichere Daten für lokale Simulation
                localStorage.setItem('test-n8n-data', JSON.stringify(testData));
                alert('📝 Testdaten gespeichert!\nÖffnen Sie das Kanban Board und die Daten werden automatisch geladen.');
            }
        }
        
        function openKanbanBoard() {
            window.open('kanban.html', 'kanban', 'width=1200,height=800');
        }
        
        // Auto-load test data if available
        window.addEventListener('load', function() {
            const savedData = localStorage.getItem('test-n8n-data');
            if (savedData) {
                const data = JSON.parse(savedData);
                // Clean up
                localStorage.removeItem('test-n8n-data');
                // Load into current board if functions are available
                if (window.addColumnWithCards) {
                    setTimeout(() => {
                        window.addColumnWithCards(data.column, data.cards);
                    }, 1000);
                }
            }
        });
    </script>
</body>
</html>
