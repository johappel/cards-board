<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board System</title>
    <link rel="stylesheet" href="cards-board.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body>
    <!-- Dashboard View -->
    <div id="dashboard">
        <div class="dashboard-header">
            <h1>Kanban Board Dashboard</h1>
            <div class="file-actions">
                <button class="btn btn-primary" onclick="DashboardManager.getInstance().createNewBoard()">+ Neues Board</button>
                <button class="btn btn-secondary" onclick="StorageManager.getInstance().exportBoards()">Export All Boards</button>
                <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">Import Boards</button>
                <input type="file" id="import-file" class="file-input" accept=".json" onchange="StorageManager.getInstance().importBoards(event)"></input>
            </div>
        </div>
        <div class="boards-grid" id="boards-grid">
          <!-- Board cards will be inserted here -->
        </div>
    </div>

    <!-- Board View -->
    <div id="board-view">
        <div class="board-header">
            <div class="board-header-left">
                <div class="board-title" id="board-title">Board Title</div>
                <div class="board-authors" id="board-authors">Authors: </div>
                <div class="board-summary" id="board-summary">Board summary will appear here...</div>
            </div>
            <div class="board-header-actions">
                <button class="btn btn-ai" onclick="AIManager.getInstance().generateBoardSummary(BoardManager.getInstance().getCurrentBoard())">ü§ñ Generate Summary</button>
                <button class="btn btn-secondary" onclick="ModalManager.getInstance().openBoardSettings()">‚öôÔ∏è Settings</button>
                <button class="btn btn-secondary" onclick="StorageManager.getInstance().exportCurrentBoard()">üì• Export</button>
                <button class="btn btn-secondary" onclick="DashboardManager.getInstance().showDashboard()">‚Üê Back</button>
            </div>
        </div>
        <div class="kanban-board" id="kanban-board">
            <!-- Columns will be inserted here -->
        </div>
    </div>

    <!-- Card Modal -->
    <div class="modal" id="card-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Create New Card</h2>
                <button class="close-btn" onclick="ModalManager.getInstance().closeModal('card-modal')">&times;</button>
            </div>
            <form id="card-form">
                <div class="form-group">
                    <label for="card-heading">Card Heading</label>
                    <input type="text" id="card-heading" required>
                </div>
                <div class="form-group">
                    <label for="card-content">Content</label>
                    <textarea id="card-content" placeholder="Enter content or use as prompt..."></textarea>
                </div>
                <div class="form-group">
                    <label for="card-column">Column</label>
                    <select id="card-column">
                        <!-- Options will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="card-color-palette">Card Background</label>
                    <div class="color-palette" id="card-color-palette">
                        <div class="color-option" data-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" title="Purple Blue"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" title="Pink Red"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" title="Blue Cyan"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" title="Green Mint"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #fa709a 0%, #fee140 100%)" title="Pink Yellow"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)" title="Soft Pastel"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)" title="Orange Peach"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #ff8a80 0%, #ea4c89 100%)" title="Coral Pink"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #b2fefa 0%, #0ed2f7 100%)" title="Ice Blue"></div>
                        <div class="color-option selected" data-gradient="linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)" title="Default White"></div>
                    </div>
                    <input type="hidden" id="card-color" value="linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)">
                </div>
                <div class="ai-section">
                    <h3>AI Features</h3>
                    <button type="button" class="btn btn-secondary" onclick="CardManager.getInstance().useAsPrompt()">Use as Prompt</button>
                    <button type="button" class="btn btn-secondary" onclick="CardManager.getInstance().generateWithAI()">Generate Content</button>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Save Card</button>
                    <button type="button" class="btn btn-secondary" onclick="ModalManager.getInstance().closeModal('card-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Column Settings Modal -->
    <div class="modal" id="column-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Column Settings</h2>
                <button class="close-btn" onclick="ModalManager.getInstance().closeModal('column-modal')">&times;</button>
            </div>
            <form id="column-form">
                <div class="form-group">
                    <label for="column-name">Column Name</label>
                    <input type="text" id="column-name" required>
                </div>
                <div class="form-group">
                    <label for="column-color-palette">Column Background</label>
                    <div class="color-palette" id="column-color-palette">
                        <div class="color-option" data-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" title="Purple Blue"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" title="Pink Red"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" title="Blue Cyan"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" title="Green Mint"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #fa709a 0%, #fee140 100%)" title="Pink Yellow"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)" title="Soft Pastel"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)" title="Orange Peach"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #ff8a80 0%, #ea4c89 100%)" title="Coral Pink"></div>
                        <div class="color-option" data-gradient="linear-gradient(135deg, #b2fefa 0%, #0ed2f7 100%)" title="Ice Blue"></div>
                        <div class="color-option selected" data-gradient="linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%)" title="Default Gray"></div>
                    </div>
                    <input type="hidden" id="column-color" value="linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%)">
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Save Column</button>
                    <button type="button" class="btn btn-secondary" onclick="ModalManager.getInstance().closeModal('column-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Board Settings Modal -->
    <div class="modal" id="board-settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Board Settings</h2>
                <button class="close-btn" onclick="ModalManager.getInstance().closeModal('board-settings-modal')">&times;</button>
            </div>
            <form id="board-settings-form">
                <div class="form-group">
                    <label for="board-name">Board Name</label>
                    <input type="text" id="board-name" required>
                </div>
                <div class="form-group">
                    <label for="board-authors-input">Authors (comma-separated)</label>
                    <input type="text" id="board-authors-input" placeholder="John Doe, Jane Smith">
                </div>
                <div class="form-group">
                    <label for="board-summary-input">Board Summary</label>
                    <textarea id="board-summary-input"></textarea>
                </div>
                <div class="form-group">
                    <label for="board-bg-color">Background Color</label>
                    <input type="color" id="board-bg-color" value="#f5f7fa">
                </div>
                <div class="form-group">
                    <label for="board-custom-style">Custom CSS Style</label>
                    <textarea id="board-custom-style" class="custom-style-editor" placeholder="Enter custom CSS..."></textarea>
                </div>
                <div class="ai-section">
                    <h3>AI Configuration</h3>
                    <div class="form-group">
                        <label for="ai-provider">LLM Provider</label>
                        <select id="ai-provider">
                            <option value="">Select Provider</option>
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ai-api-key">API Key</label>
                        <input type="password" id="ai-api-key" placeholder="Enter your API key">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Save Settings</button>
                    <button type="button" class="btn btn-secondary" onclick="ModalManager.getInstance().closeModal('board-settings-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- New Board Modal -->
    <div class="modal" id="new-board-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Board</h2>
                <button class="close-btn" onclick="ModalManager.getInstance().closeModal('new-board-modal')">&times;</button>
            </div>
            <form id="new-board-form">
                <div class="form-group">
                    <label for="new-board-name">Board Name</label>
                    <input type="text" id="new-board-name" required>
                </div>
                <div class="form-group">
                    <label for="new-board-description">Description</label>
                    <textarea id="new-board-description"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Create Board</button>
                    <button type="button" class="btn btn-secondary" onclick="ModalManager.getInstance().closeModal('new-board-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- JavaScript Modules - Load in dependency order -->
    <script src="js/storage.js"></script>
    <script src="js/modal-manager.js"></script>
    <script src="js/ai-manager.js"></script>
    <script src="js/board-manager.js"></script>
    <script src="js/column-manager.js"></script>
    <script src="js/card-manager.js"></script>
    <script src="js/dashboard-manager.js"></script>
    <script src="js/event-manager.js"></script>
    
    <!-- Main Application Coordinator -->
    <script src="cards-board.js"></script>
</body>
</html>